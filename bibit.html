<!DOCTYPE html>
<html lang="it"
>
<head>
    <title>#1 - Bibit - TicinoXP</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="./bibit.html">

        <meta name="author" content="Arialdo Martini" />
        <meta name="keywords" content="code-game" />
        <meta name="description" content="Giuseppe Caferra ci ha proposto un problema davvero sfidante: il &#34;Bibit&#34;. Si tratta di un algoritmo di checksum binario, basato sulla riduzione progressiva di una struttura a triangoli contenuti uno dentro l&#39;altro. Il testo originale del problema è questo: Bibit ----- Task: Implement the following Bibit algorithm in any programming ..." />

    <!-- Enable latex plugin -->




    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.arialdo.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
<img src="./images/ticinoxp-75.png" width="75px"/>             </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="./pages/about.html">
                             About
                          </a></li>
                        <li class="active">
                            <a href="./category/code-games.html">Code games</a>
                        </li>
                        <li >
                            <a href="./category/meetup.html">Meetup</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="./archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="." title="TicinoXP"><i class="fa fa-home fa-lg"></i></a></li>
                <li class="active">#1 - Bibit</li>
            </ol>

    <section id="content">
        <article>
            <header class="page-header">
    <p>
        <a class="btn btn-info btn-xs" href="./category/Code Games">Code Games</a>
    </p>
                <h1>
                    <a href="./bibit.html"
                       rel="bookmark"
                       title="Permalink to #1 - Bibit">
                        #1 - Bibit
                    </a>
                </h1>
<footer class="post-info">
    <span class="published">
        Giuseppe Caferra - <i class="fa fa-calendar"></i><time datetime="2017-08-25T19:00:00+02:00"> Fri 25 August 2017</time>
    </span>







    
</footer><!-- /.post-info -->            </header>
            <div class="entry-content">
                <!-- <span class="published">
                     Giuseppe Caferra - <i class="fa fa-calendar"></i><time datetime="2017-08-25T19:00:00+02:00"> Fri 25 August 2017</time>
                     </span>
                   -->

                <p>Giuseppe Caferra ci ha proposto un problema davvero sfidante: il &quot;Bibit&quot;.</p>
<p>Si tratta di un algoritmo di checksum binario, basato sulla riduzione
progressiva di una struttura a triangoli contenuti uno dentro l'altro.</p>
<p>Il testo originale del problema è questo:</p>
<pre class="literal-block">
Bibit
-----

Task: Implement the following Bibit algorithm in any programming language.

The idea of this task is to test your general skills in algorithms and
data structures, as well as the ability to write clear, readable code.
We do this as the job is related to implementation of new algorithms,
not with building applications from ready blocks and third-party
libraries.

Evaluation criteria:

1) The program must work correctly.

2) The code has to be simple and easy to maintain - we are not
interested in architectural astronauts, with lots of abstraction or
other complicated design patterns.

Do not write the code for future extensibility. Instead, write the code
to solve the task at hand in the simplest and best way and to be as
readable as possible.  A short, but readable program is better than a
long and general one.

3) Finally, the faster you can finish the task, the better.  Please
report a breakdown of how you spent your time.

Criterion 3 is less important than 1 &amp; 2.

```
Bibit takes place in a 2D pyramid of triangles. The pyramids vary in size,
from the smallest of size 1 being a single cell:

    ^
   / \
  *---*

doubling to the pyramid with 4 cells:

      ^
     / \
    *---*
   / \ / \
  *---*---*

Double again to get the pyramid with 16 cells:

          ^
         / \
        *---*
       / \ / \
      *---*---*
     / \ / \ / \
    *---*---*---*
   / \ / \ / \ / \
  *---*---*---*---*

This could be doubled to one with 64 cells:

                  ^
                 / \
                *---*
               / \ / \
              *---*---*
             / \ / \ / \
            *---*---*---*
           / \ / \ / \ / \
          *---*---*---*---*
         / \ / \ / \ / \ / \
        *---*---*---*---*---*
       / \ / \ / \ / \ / \ / \
      *---*---*---*---*---*---*
     / \ / \ / \ / \ / \ / \ / \
    *---*---*---*---*---*---*---*
   / \ / \ / \ / \ / \ / \ / \ / \
  *---*---*---*---*---*---*---*---*

and so on, so that the number of cells is a power of 4.

Each cell is either black or white, representing a bit. Therefore, each
triangle corresponds to a binary number, where the bits are numbered in
reading order:

      ^
     /0\
    *---*
   /1\2/3\
  *---*---*

So this triangle with three black cells and one white cell

      ^
     /1\
    *---*
   /0\1/1\
  *---*---*

corresponds to the binary number 1101 = 0x0D.

The binary number 1100 corresponds to this pyramid:

      ^
     /0\
    *---*
   /0\1/1\
  *---*---*

Similary, the binary number

    0101110 11010 011 0
  = 0101 1101 1010 0110 = 0x5da6

corresponds to this pyramid:

          ^
         /0\
        *---*
       /1\1/0\
      *---*---*
     /0\1/0\1/1\
    *---*---*---*
   /0\1/1\1/0\1/0\
  *---*---*---*---*

Bibit is a kind of checksum algorithm, which takes a binary number and calculates
a single-bit checksum.

It does this by matching patterns in the input pyramid, and reducing those patterns
according to the following 16 transition rules:

  0000 -&gt; 0000
  0001 -&gt; 1000
  0010 -&gt; 0001
  0011 -&gt; 0010
  0100 -&gt; 0000
  0101 -&gt; 0010
  0110 -&gt; 1011
  0111 -&gt; 1011
  1000 -&gt; 0100
  1001 -&gt; 0101
  1010 -&gt; 0111
  1011 -&gt; 1111
  1100 -&gt; 1101
  1101 -&gt; 1110
  1110 -&gt; 0111
  1111 -&gt; 1111

So the third rule 0010 -&gt; 0001 states that a group of four triangles with this shape
changes like this:

      ^              ^
     /0\            /1\
    *---*    -&gt;    *---*
   /1\0/0\        /0\0/0\
  *---*---*      *---*---*

For a pyramid with 16 cells, the rules apply in groups of 4:

          ^
         /A\
        *---*
       /A\A/A\
      *---*---*
     /B\C/C\C/D\
    *---*---*---*
   /B\B/B\C/D\D/D\
  *---*---*---*---*

where the group C is upside-down and the bits numbered like this:

      *---*---*
       \1/2\3/
        *---*
         \0/
          *

Example:

          ^
         /0\
        *---*
       /1\1/0\
      *---*---*
     /0\1/0\1/1\
    *---*---*---*
   /0\1/1\1/0\1/0\
  *---*---*---*---*

Group A is

          ^
         /0\
        *---*
       /1\1/0\
      *---*---*

(0110) and transforms to (1011):

          ^
         /1\
        *---*
       /1\0/1\
      *---*---*

In this way, the entire pyramid transforms to this:

          ^
         /1\
        *---*
       /1\0/1\
      *---*---*
     /1\1/1\1/0\
    *---*---*---*
   /0\1/1\1/1\0/0\
  *---*---*---*---*

This is step 1.

The next step is this:

          ^
         /1\
        *---*
       /1\1/1\
      *---*---*
     /0\1/1\1/1\
    *---*---*---*
   /1\1/1\1/0\0/0\
  *---*---*---*---*

The algorithm iterates like this.

There is one additional rule: If a pattern matches at group level, then the
entire pyramid reduces to a simpler one.

So, if we have this pyramid:

          ^
         /1\
        *---*
       /1\1/1\
      *---*---*
     /1\1/1\1/0\
    *---*---*---*
   /1\1/1\1/0\0/0\
  *---*---*---*---*

this reduces to this smaller pyramid

          ^
         /1\
        *---*
       /1\1/0\
      *---*---*

in a single step.

Transitively, if you have this pyramid:

                  ^
                 /0\
                *---*
               /0\0/0\
              *---*---*
             /0\0/0\0/0\
            *---*---*---*
           /0\0/0\0/0\0/0\
          *---*---*---*---*
         /0\0/0\0/0\0/0\0/0\
        *---*---*---*---*---*
       /0\0/0\0/0\0/0\0/0\0/0\
      *---*---*---*---*---*---*
     /0\0/0\0/0\0/0\0/0\0/0\0/0\
    *---*---*---*---*---*---*---*
   /0\0/0\0/0\0/0\0/0\0/0\0/0\0/0\
  *---*---*---*---*---*---*---*---*

this reduces to

    ^
   /0\
  *---*

in a single step.

The rules are structured so that it is always well-defined how to transform
a pyramid.

Your task is to implement a program that takes any string of 0 and 1s of sui
table length, lowest bit at the end on the command line, internally
constructs the corresponding pyramid, prints the pyramid as a binary string
on one line (so the first line is the same as the input), applies the rules,
prints the resulting pyramid for each reduction and for each transformation
as a binary string in one line, and loops until the pyramid is reduced to a
single bit and you print either a 0 or 1 on a single line.

Sample dump of a session:

&gt; bibit.exe 0100
0100
0000
0

Please include the dump of a session starting with your birthday as an
integer in MMDDYY divded by two, encoded to binary in your response.
So if you are born the 24th of December 1980, the seed is 122480/2 = 61240
and it becomes this invocation:

&gt; bibit.exe 1110111100111000
[intermediate output skipped]
1

Also, please include a dump of a session with this input:

&gt; bibit.exe 1100100100001111110110101010001000100001011010001100001000110100
[intermediate output skipped]
1

For reference, here is a visual dump of the rules:

     ^             ^
    / \           / \
   *---*   -&gt;    *---*
  / \ / \       / \ / \
 *---*---*     *---*---*

     ^             ^
    /#\           / \
   *---*   -&gt;    *---*
  / \ / \       / \ /#\
 *---*---*     *---*---*

     ^             ^
    / \           /#\
   *---*   -&gt;    *---*
  /#\ / \       / \ / \
 *---*---*     *---*---*

     ^             ^
    /#\           / \
   *---*   -&gt;    *---*
  /#\ / \       /#\ / \
 *---*---*     *---*---*

     ^             ^
    / \           / \
   *---*   -&gt;    *---*
  / \#/ \       / \ / \
 *---*---*     *---*---*

     ^             ^
    /#\           / \
   *---*   -&gt;    *---*
  / \#/ \       /#\ / \
 *---*---*     *---*---*

     ^             ^
    / \           /#\
   *---*   -&gt;    *---*
  /#\#/ \       /#\ /#\
 *---*---*     *---*---*

     ^             ^
    /#\           /#\
   *---*   -&gt;    *---*
  /#\#/ \       /#\ /#\
 *---*---*     *---*---*

     ^             ^
    / \           / \
   *---*   -&gt;    *---*
  / \ /#\       / \#/ \
 *---*---*     *---*---*

     ^             ^
    /#\           /#\
   *---*   -&gt;    *---*
  / \ /#\       / \#/ \
 *---*---*     *---*---*

     ^             ^
    / \           /#\
   *---*   -&gt;    *---*
  /#\ /#\       /#\#/ \
 *---*---*     *---*---*

     ^             ^
    /#\           /#\
   *---*   -&gt;    *---*
  /#\ /#\       /#\#/#\
 *---*---*     *---*---*

     ^             ^
    / \           /#\
   *---*   -&gt;    *---*
  / \#/#\       / \#/#\
 *---*---*     *---*---*

     ^             ^
    /#\           / \
   *---*   -&gt;    *---*
  / \#/#\       /#\#/#\
 *---*---*     *---*---*

     ^             ^
    / \           /#\
   *---*   -&gt;    *---*
  /#\#/#\       /#\#/ \
 *---*---*     *---*---*

     ^             ^
    /#\           /#\
   *---*   -&gt;    *---*
  /#\#/#\       /#\#/#\
 *---*---*     *---*---*
</pre>
<div class="section" id="le-nostre-soluzioni">
<h2>Le nostre soluzioni</h2>
<p>All'inizio il problema ci sembra impossibile da affrontare: passiamo giorni
interi a scervellarci su come affrontarlo e a lasciare disegni di triangoli
su fogli e lavagne.</p>
<img alt="" class="align-center" src="images/code-game-1-bibit/appunti-beppe.png" style="width: 500px;" />
<img alt="" class="align-center" src="images/code-game-1-bibit/appunti-arialdo.jpg" style="width: 500px;" />
<img alt="" class="align-center" src="images/code-game-1-bibit/lavagna.jpg" style="width: 500px;" />
<p>Piano piano, si inizia a capire che il problema va affrontato ricorsivamente,
e che sono necessari due modelli, uno triangolare e uno lineare. Ma popolare
i due modelli sembra davvero un'impresa.</p>
<p>La prima soluzione funzionante la porta <strong>Peppe</strong> (<a class="reference external" href="https://github.com/gcaferra/bibit">https://github.com/gcaferra/bibit</a>)
con un approccio molto object oriented, nella quale effettivamente emergono
molto chiaramente i due modelli.
Nel modello di Peppe esiste il concetto di piramide composta da 4 celle
contenenti a loro volta altre piramidi, o delle unità numeriche. Per la risoluzione
originale Peppe prevedeva anche l'esistenza di piramidi rovesciate ma, contando
sulla bontà dei test, aveva scoperto di poterne fare a meno ed di poter eliminare così
gran parte della duplicazione del codice.</p>
<p>Emanuele prova a replicare la soluzione (<a class="reference external" href="https://github.com/emanuelefirmani/TriangleChecksum/tree/master/src/TriangleChecksum">https://github.com/emanuelefirmani/TriangleChecksum</a>),
e lì per lì sembra a tutti quanti che non ci siano a disposizione molti altri
approcci.</p>
<p>Qualche giorno dopo, però, <strong>Beppe Lombardi</strong> ha un'intuizione e nota che i vertici
dei triangoli sono posizionati tutti su indici multipli di 4. L'osservazione di Beppe
suggerisce a <strong>Emanuele</strong> una soluzione molto alternativa
(<a class="reference external" href="https://github.com/emanuelefirmani/TriangleChecksum/tree/Linear/src/TriangleChecksum">branch linear di https://github.com/emanuelefirmani/TriangleChecksum</a>). Con il suo approccio Emanuele affronta il
problema in modo completamente diverso: scompare il concetto di triangoli
contenuti in altri triangoli e il calcolo resta ricorsivo ma molto più lineare.</p>
<p>L'algoritmo diventa più compatto e più efficace, ma anche un pochino meno
evidente, per via di qualche calcolo sugli indici degli array:</p>
<pre class="literal-block">
var v = Units[cellIndex + 2 * (level + 1) + 1];
var b1 = Units[cellIndex++];
var b2 = Units[cellIndex++];
var b3 = Units[cellIndex++];
triangles.Add(new Triangle(v, b1, b2, b3));
</pre>
<p>Anche <strong>Giuseppe Lombardi</strong> risolve con un approccio simile,
(<a class="reference external" href="https://github.com/beppel/Triangle">https://github.com/beppel/Triangle</a>), ma si spinge ancora oltre ed elimina
completamente la necessità di modellare triangoli sostituendoli con delle stringhe,
e ottenendo probabilmente l'algoritmo più veloce ed efficiente di tutti.</p>
</div>

            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="http://twitter.com/ticinoxp"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                    <li class="list-group-item"><a href="http://github.com/ticinoxp"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                    <li class="list-group-item"><a href="http://reddit.com/r/TicinoXP"><i class="fa fa-reddit-square fa-lg"></i> reddit</a></li>
                  </ul>
                </li>





    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://github.com/ticinoxp/code-games" target="_blank">
                Code Games Repo
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://milanojs.com/" target="_blank">
                MilanoJS
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://groups.google.com/forum/#!forum/varese-xpug" target="_blank">
                Varese XPug
            </a>
        </li>
      </ul>
    </li>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 TicinoXP
            &middot; Powered by Python <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>

    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-44802996-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->
</body>
</html>